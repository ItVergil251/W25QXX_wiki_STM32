# W25QXX - Flash пам'ять для МКР і не тільки

## Що таке пристрій пам'яті Flash?

Флешпам'ять - це тип довготривалої комп'ютерної пам'яті, вміст якої можна видалити та перепрограмувати електричним методом. Ті хто знають про EEPROM скажуть що це і є EEPROM пам'ять. В принципі вони схожі за принципом роботи. Але головні відмінності полягають у наступному. Flash пам'ять буде зберігати тільки ту інформацію, яку ми забажаємо записати. Але записати можна мінімум 256 Байт або 1 сторінку`(Page)`. Перед записом нам потрібно очистити мінімум 4 кБайти або 1 сектор`(Sector)`. А саму пам'ять поділяють в першу чергу на блоки`(Blocks)` розміром по 64 кБайти або 32 кБайти.

## Як працювати з пам'ятю W25QXX?

Ми вже зрозуміли, що Flash пам'ять трохи схожа на пам'ять EEPROM. А точніше за принципами роботи. Ми по бітно можемо лише читати інформацію. Однак записати можна мінімум 1 "сторінку". Для подальшого уточнення закріпимо:

- 1 сторінка `(Page)` = 256 байт
- 1 сектор `(Sector)` = 4096 байт = 4 кБайт
- 1 блок `(Block)` = 65536 байт = 64 кБайт (може ще бути 32 кБайт, але будемо брати 64)

### Механізми роботи з пам'яттю

Отже для запису треба брати 1 сторінку мінімум. Але якщо так виходить що частина інформації по запису покриває не одну сторінку а більше, тоді вже треба охоплювати більше сторінок але також треба враховувати чи є на інших сторінках якась інша інформація.

Сам запис відбувається через логічну множення `AND(Та)`. Приклади операції:
```
1. 0b0011 & 0b0101 = 0b0110 (3 and 5 = 6)
2. 0x0F & 0x05 = 0x0A (15 and 5 = 10)
3. 20 & 4 = 16 (20 and 4 = 16)
```
На даних прикладах розписано загальні приклади операції XOR. Але повернемось до нашої пам'яті. Запис порожнього байту виглядає таким чином - `0b11111111` або `0xF()`. Цей вираз буде зручним в парі з операцією XOR. Наприклад запишемо символ `'X'`, який в С та С++ може бути у вигляді змінної типу `char` розміром *1 байт*. Переведемо до двійкомого запису:

```
'X' = (char)88 = 0x58 = 0b01011000
```

А тепер запишемо це в частину пам'яті: `0b01011000 & 0b11111111 = 0b01011000`.

